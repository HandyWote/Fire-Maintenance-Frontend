下面把客户的诉求梳理成可落地的产品需求，便于评审与实现。

一、现状与痛点
- 系统在制定维保计划时，只能选择单一周期（“月度”或“季度”），无法多选。
- 实际工作按月出报告，但季度/半年/年度项要么被忽略，要么需要人工一条条添加到当月计划，效率低且易漏项。
- 年度维保没有单独计划，实际希望在某个指定月份（如12月）把年度项并入当月计划。

二、目标与原则
- 以“月”为计划单位（每月一份计划、一份报告）。
- 在创建某月计划时，可同时选择多个频次（如：月+季+半年+年）。
- 系统自动把“当月应完成”的月/季/半年/年任务加入该月计划，避免人工逐条添加。
- 确保统计与合规：每台设备在其频次对应的自然周期内完成规定次数（如季度内至少1次、半年内至少1次、年度内1次）。

三、关键业务规则（建议）
- 频次定义（默认使用自然周期）
  - 月度：每月必须对配置的设备/项目执行一次。
  - 季度：每自然季度（Q1:1-3月，Q2:4-6，Q3:7-9，Q4:10-12）至少完成一次；支持“集中某月执行”或“均衡分配到本季度三个月”两种策略。
  - 半年：每半年至少一次（上半年1-6月、下半年7-12月）；支持指定“半年集中月”（默认6月、12月）或均衡分配。
  - 年度：每年一次；支持设置“年度锚定月”（默认12月，可改为任意月）。
- 当月计划包含哪些任务
  - “月度”任务：始终加入。
  - “季度/半年/年度”任务：只加入本月“到期”的任务。
    - 集中执行模式：若该频次的锚定月等于当前月，则该频次的所有相关任务加入本月计划。
    - 均衡模式：系统按设备清单把该频次任务平均分配到周期内各月；当前月分配到的任务加入计划。
  - 未完成的到期任务跨月自动结转并标记逾期。
- 覆盖校验
  - 系统按设备维度校验覆盖率（例如：本季度每台排烟风机至少被测试一次）。
  - 月报中展示“本月完成 + 该自然周期累计完成/应完成”，避免月底/季末漏项。

四、创建计划的交互（建议）
- 创建“某年某月”的维保计划时：
  - 多选频次：月/季/半年/年（可同时勾选）。
  - 选择调度策略：季度/半年项默认“集中到周期末月”，也可切换为“均衡分配”。
  - 年度项：可以为每个年度任务设置“年度锚定月”（默认12月），计划生成时若当前月=锚定月则自动纳入。
  - 预览页：展示将被加入的任务清单、分组汇总（设备数/任务数/预计工时），并标注“本周期覆盖进度”。
  - 计划发布后生成工作任务；允许批量调整和单条修改。

五、数据与配置（最小集）
- 任务模板（与设备或设备类型关联）
  - 任务名称、频次（月/季/半年/年）
  - 自然周期/间隔模式（默认自然周期）
  - 锚定规则（季度/半年/年度的锚定月；或均衡）
  - 覆盖对象范围（全部设备/按区域/按清单）
- 设备任务实例
  - 设备ID、频次、上次完成时间、覆盖状态（本周期内是否已完成）
- 计划与任务
  - 计划年月、包含频次、采用的分配策略、生成的任务列表、状态（草稿/发布/完成）

六、生成逻辑（简述）
- 输入：计划年月M、所选频次集合F、任务模板、历史完成记录。
- 步骤：
  1) 月度：拉取所有月度模板→对每台对应设备生成当月任务。
  2) 季度/半年/年度：
     - 计算M所在自然周期（或依锚定月判断是否当月到期）。
     - 若集中模式且M为锚定月→生成该频次全部待覆盖设备的任务（排除本周期已完成的设备）。
     - 若均衡模式→按设备量平均分配到周期内各月；为当前月分配的设备生成任务（排除本周期已完成的设备）。
  3) 追加逾期未完成任务的结转。
  4) 去重与合并：若同一设备同一检查项在当月同时被月度和季度要求，支持合并一次执行计双频次合规（需模板定义“可合并”）。
- 输出：当月任务清单 + 覆盖率预估。

七、报表与合规
- 月报：展示当月执行结果、逾期、以及“本季度/半年/年度累计覆盖率”。
- 预警：季度/半年/年度临近截止月，提前提醒未覆盖设备数量。

八、示例（贴合客户表述）
- 配置：
  - 消防水泵测试：频次=月度。
  - 排烟风机测试：频次=季度（集中执行=季度末月）。
  - 消防系统联动测试：频次=年度（锚定月=12月）。
- 生成：
  - 3月计划勾选“月+季”：包含所有水泵月检＋Q1所有未测风机（因集中到3月）。
  - 12月计划勾选“月+年”：包含水泵月检＋年度联动测试；如还勾选“季/半年”，则加入相应到期项。

九、边界与异常
- 中途新增设备：加入当前周期的未覆盖清单，按策略安排至本周期剩余月份或锚定月。
- 提前执行：记录可计入该自然周期覆盖；下次到期不提前顺延至下一自然周期。
- 策略变更：修改锚定月或均衡策略后，需重新计算后续月份的分配。
- 合并执行：仅当模板声明“同项可合并计入多频次”时生效，避免重复工作量。

十、待确认的问题（请客户或业务方明确）
- 季度/半年任务默认是“集中在周期末月”还是“均衡分配”？是否需要系统级默认+可按任务单独覆盖？
- 年度任务是否允许跨年提前执行并计入下一年？还是严格按自然年仅计入当年？
- 同一设备相同检查项的多频次合并规则如何认定为“满足高频与低频同时合规”（检查内容是否一致/包含关系）？
- 报表是否需要呈现“计划内完成率”和“周期覆盖率”两套口径？

十一、分步实施建议（MVP → 完整版）
- 第一步（MVP）：
  - 创建月计划支持多选频次（含年/季/半年）。
  - 支持“集中执行模式”的锚定月配置，自动把到期任务加入当月。
  - 覆盖率校验与逾期结转。
- 第二步：
  - 支持“均衡分配”策略，自动分摊季度/半年任务到各月，并提供拖拽调整。
  - 支持“同项合并计多频次合规”。
- 第三步：
  - 预警与工作量预测、负载均衡优化、可视化日历。

这样实现后，您在创建某个月的维保计划时，只需勾选“月/季/半年/年”，系统会自动把当月到期的所有任务（含季度、半年、年度）加入，无需再逐条添加季度或年度任务；12月勾选“月+年”即可把年度联动测试并入12月计划。

需要的话，我可以根据你们现有的数据结构，给出具体字段、生成算法的伪代码，或先做一个“3月/6月/12月”的样例计划明细，帮助你们评估工作量和确认细节。